{% extends "base.html" %}
{% block content %}
<div class="max-w-6xl mx-auto px-6 py-8">
  <h1 class="text-2xl font-semibold text-indigo-600 mb-6">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡∏™‡∏π‡∏á‡∏≠‡∏≤‡∏¢‡∏∏</h1>

  <!-- ‡∏õ‡∏∏‡πà‡∏°‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å -->
<!-- ‡∏õ‡∏∏‡πà‡∏°‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å (Dashboard ‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•) -->
<div class="flex justify-end mb-4">
  <a href="{{ url_for('dashboard') }}" 
     class="bg-gray-200 hover:bg-gray-300 text-gray-700 font-semibold px-4 py-2 rounded-xl shadow-md">
     ‚¨ÖÔ∏è ‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å
  </a>
</div>

  <form method="get" class="mb-6 flex gap-2">
    <input type="text" name="search" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ä‡∏∑‡πà‡∏≠, HN, GCN..."
           value="{{ search }}" class="w-full border rounded-lg px-4 py-2">
    <button type="submit" class="bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600">
      üîç ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤
    </button>
    <a href="{{ url_for('add_patient') }}" 
       class="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700">‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢‡πÉ‡∏´‡∏°‡πà</a>
  </form>

  <table class="w-full border-collapse bg-white shadow rounded-xl overflow-hidden">
    <thead class="bg-indigo-100 text-gray-700">
      <tr>
        <th class="py-3 px-4 text-left">HN / GCN</th>
        <th class="py-3 px-4 text-left">‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•</th>
        <th class="py-3 px-4 text-center">‡∏≠‡∏≤‡∏¢‡∏∏</th>
        <th class="py-3 px-4 text-center">‡πÇ‡∏£‡∏Ñ‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ï‡∏±‡∏ß</th>
        <th class="py-3 px-4 text-center">‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á</th>
        <th class="py-3 px-4 text-center">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</th>
      </tr>
    </thead>
    <tbody>
      {% for p in patients %}
      <tr class="border-t hover:bg-gray-50">
        <td class="py-3 px-4">{{ p.hn }} / {{ p.gcn }}</td>
        <td class="py-3 px-4">{{ p.name }}</td>
        <td class="text-center">{{ p.age }} ‡∏õ‡∏µ</td>
        <td class="text-center">{{ p.disease }}</td>
        <td class="text-center">
          {% if p.risk_level == '‡∏™‡∏π‡∏á' %}
            <span class="text-red-600 bg-red-100 px-3 py-1 rounded-full text-sm">‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏™‡∏π‡∏á</span>
          {% elif p.risk_level == '‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á' %}
            <span class="text-orange-600 bg-orange-100 px-3 py-1 rounded-full text-sm">‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á</span>
          {% else %}
            <span class="text-green-600 bg-green-100 px-3 py-1 rounded-full text-sm">‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏ï‡πà‡∏≥</span>
          {% endif %}
        </td>
        <td class="text-center">
          <a href="{{ url_for('edit_patient', id=p.id) }}" class="text-blue-600 hover:underline">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</a> |
          <a href="{{ url_for('patient_history', id=p.id) }}" class="text-blue-600 hover:underline">‡∏î‡∏π‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥</a> |
            <form method="post" action="{{ url_for('delete_patient', id=p.id) }}" class="inline">
            <button type="submit" class="text-red-600 hover:underline"
                    onclick="return confirm('‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ô‡∏µ‡πâ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?')">‡∏•‡∏ö</button>
          </form>
        </td>
      </tr>
      {% else %}
      <tr><td colspan="6" class="text-center py-6 text-gray-400">‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢</td></tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}
