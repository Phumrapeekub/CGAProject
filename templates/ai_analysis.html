{% extends "base.html" %}
{% block title %}‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏î‡πâ‡∏ß‡∏¢ AI{% endblock %}

{% block content %}
<div class="max-w-6xl mx-auto px-6 py-8">
  <section class="rounded-2xl bg-white shadow-lg p-8 space-y-6">
    
    <h1 class="text-3xl font-semibold text-indigo-600">‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏î‡πâ‡∏ß‡∏¢ AI</h1>
    <p class="text-slate-600 text-sm">‡∏£‡∏∞‡∏ö‡∏ö‡∏ö‡∏π‡∏£‡∏ì‡∏≤‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ñ‡∏±‡∏î‡∏Å‡∏£‡∏≠‡∏á‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û‡∏ú‡∏π‡πâ‡∏™‡∏π‡∏á‡∏≠‡∏≤‡∏¢‡∏∏‡∏î‡πâ‡∏ß‡∏¢ Machine Learning</p>

    <div class="grid grid-cols-3 gap-6 mt-6 bg-gradient-to-r from-cyan-500 to-blue-500 text-white rounded-2xl p-6">
      <div>
        <p class="font-medium">‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢</p>
        <p class="text-xl mt-1">{{ patient.name }}</p> 
      </div>
      <div>
        <p class="font-medium">HN / GCN</p>
        <p class="text-xl mt-1">{{ patient.hn }} / {{ patient.gcn }}</p>
      </div>
      <div>
        <p class="font-medium">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô</p>
        <p class="text-xl mt-1" id="thai-date-display"></p>

<script>
  (function() {
    const now = new Date();
    const thaiMonths = [
      "‡∏°‡∏Å‡∏£‡∏≤‡∏Ñ‡∏°", "‡∏Å‡∏∏‡∏°‡∏†‡∏≤‡∏û‡∏±‡∏ô‡∏ò‡πå", "‡∏°‡∏µ‡∏ô‡∏≤‡∏Ñ‡∏°", "‡πÄ‡∏°‡∏©‡∏≤‡∏¢‡∏ô", "‡∏û‡∏§‡∏©‡∏†‡∏≤‡∏Ñ‡∏°", "‡∏°‡∏¥‡∏ñ‡∏∏‡∏ô‡∏≤‡∏¢‡∏ô",
      "‡∏Å‡∏£‡∏Å‡∏é‡∏≤‡∏Ñ‡∏°", "‡∏™‡∏¥‡∏á‡∏´‡∏≤‡∏Ñ‡∏°", "‡∏Å‡∏±‡∏ô‡∏¢‡∏≤‡∏¢‡∏ô", "‡∏ï‡∏∏‡∏•‡∏≤‡∏Ñ‡∏°", "‡∏û‡∏§‡∏®‡∏à‡∏¥‡∏Å‡∏≤‡∏¢‡∏ô", "‡∏ò‡∏±‡∏ô‡∏ß‡∏≤‡∏Ñ‡∏°"
    ];
    const dateStr = `${now.getDate()} ${thaiMonths[now.getMonth()]} ${now.getFullYear() + 543}`;
    document.getElementById("thai-date-display").innerText = dateStr;
  })();
</script>
      </div>
    </div>

    <div class="space-y-4 mt-6">
      <h2 class="text-xl font-semibold text-purple-600">‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡πÇ‡∏î‡∏¢ AI</h2>
      
      <div class="bg-purple-50 border border-purple-200 rounded-xl p-6">
        <p class="text-lg font-medium text-slate-800">üß† ‡∏™‡∏°‡∏£‡∏£‡∏ñ‡∏†‡∏≤‡∏û‡∏™‡∏°‡∏≠‡∏á:</p>
        <p class="ml-6 text-slate-600">{{ ai_summary.cognitive }}</p>

        <p class="text-lg font-medium text-slate-800 mt-4">üí¨ ‡∏†‡∏≤‡∏ß‡∏∞‡∏ã‡∏∂‡∏°‡πÄ‡∏®‡∏£‡πâ‡∏≤:</p>
        <p class="ml-6 text-slate-600">{{ ai_summary.depression }}</p>

        <p class="text-lg font-medium text-slate-800 mt-4">‚ù§Ô∏è‚Äçüî• ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏Ü‡πà‡∏≤‡∏ï‡∏±‡∏ß‡∏ï‡∏≤‡∏¢:</p>
        <p class="ml-6 text-slate-600">{{ ai_summary.suicide_risk }}</p>
      </div>

      <div class="mt-6">
        <h2 class="text-lg font-semibold text-slate-700">üìã ‡∏Ç‡πâ‡∏≠‡πÄ‡∏™‡∏ô‡∏≠‡πÅ‡∏ô‡∏∞‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö AI</h2>
        <ul class="list-disc list-inside text-slate-600 mt-2">
          {% if ai_summary.recommendations %}
            {% for item in ai_summary.recommendations %}
            <li>{{ item }}</li>
            {% endfor %}
          {% else %}
            <li>‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡πÄ‡∏™‡∏ô‡∏≠‡πÅ‡∏ô‡∏∞‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°‡πÉ‡∏ô‡∏Ç‡∏ì‡∏∞‡∏ô‡∏µ‡πâ</li>
          {% endif %}
        </ul>
      </div>
    </div>

    <div class="flex justify-end gap-4 mt-8">
      <a href="{{ url_for('patient_list') }}"
         class="px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300">‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</a>
      <button onclick="window.print()" 
              class="px-6 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700">‡∏û‡∏¥‡∏°‡∏û‡πå‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô</button>
    </div>
  </section>
</div>
{% endblock %}