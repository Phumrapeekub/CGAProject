{% extends "admin/admin_base.html" %}
{% block title %}จัดการแพทย์ | CGA Admin{% endblock %}

{% block content %}
  <div class="glass rounded-2xl p-6">
    <h1 class="text-2xl font-semibold text-slate-900">จัดการแพทย์</h1>
    <p class="text-slate-600 mt-1">รายชื่อแพทย์ในระบบ</p>

    <div class="mt-6 soft-card rounded-2xl overflow-hidden">
      <div class="p-4 border-b border-slate-200/70 text-sm font-semibold text-slate-700">
        รายการแพทย์
      </div>

      <div class="overflow-x-auto">
        <table class="min-w-full text-sm">
          <thead class="bg-slate-50/60 text-slate-600">
            <tr>
              <th class="text-left px-4 py-3">ชื่อแพทย์</th>
              <th class="text-left px-4 py-3">Username</th>
              <th class="text-left px-4 py-3">สถานะ</th>
              <th class="text-left px-4 py-3">เวรเดือนนี้</th>
              <th class="text-left px-4 py-3">การจัดการ</th>
            </tr>
          </thead>
          <tbody class="divide-y divide-slate-200/70">
            {% if doctors and doctors|length > 0 %}
              {% for d in doctors %}
              <tr class="hover:bg-slate-50/60">
                <td class="px-4 py-3">{{ d.full_name or "-" }}</td>
                <td class="px-4 py-3">{{ d.username or "-" }}</td>
                <td class="px-4 py-3">
                  {% if d.is_active %}
                    <span class="text-emerald-700 bg-emerald-50 border border-emerald-100 px-2 py-1 rounded-lg">ใช้งาน</span>
                  {% else %}
                    <span class="text-slate-700 bg-slate-100 border border-slate-200 px-2 py-1 rounded-lg">ปิด</span>
                  {% endif %}
                </td>
                <td class="px-4 py-3">{{ d.duty_count or 0 }}</td>
                <td class="px-4 py-3">
                  <a class="text-blue-700 font-semibold hover:underline"
                     href="{{ url_for('admin.doctor_duties', doctor_id=d.id) }}">
                    ดูเวร →
                  </a>
                </td>
              </tr>
              {% endfor %}
            {% else %}
              <tr>
                <td colspan="5" class="px-4 py-10 text-center text-slate-500">
                  ยังไม่มีข้อมูลแพทย์
                </td>
              </tr>
            {% endif %}
          </tbody>
        </table>
      </div>
    </div>
  </div>
{% endblock %}
