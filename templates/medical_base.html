<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}‡∏£‡∏∞‡∏ö‡∏ö‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û‡∏ú‡∏π‡πâ‡∏™‡∏π‡∏á‡∏≠‡∏≤‡∏¢‡∏∏{% endblock %}</title>

    <!-- Tailwind -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Tailwind Config -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#2563eb',
                    }
                }
            }
        }
    </script>

    <!-- Font -->
    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Sarabun', sans-serif; }
        /* ‡πÉ‡∏´‡πâ‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡πÄ‡∏ó‡πà‡∏≤‡∏Å‡∏±‡∏ô‡∏™‡∏ß‡∏¢ ‡πÜ */
        .tabular-nums { font-variant-numeric: tabular-nums; }
    </style>

    {% block head %}{% endblock %}
</head>

<body class="bg-gray-100 min-h-screen">

    <!-- ========== NAVBAR ========== -->
    <nav class="bg-white shadow-md border-b border-gray-200 sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-6 py-3 flex items-center justify-between gap-6">

            <!-- Left : Logo + ‡∏ä‡∏∑‡πà‡∏≠‡∏£‡∏∞‡∏ö‡∏ö + ‡πÄ‡∏°‡∏ô‡∏π -->
            <div class="flex items-center gap-6">

                <!-- Logo + ‡∏ä‡∏∑‡πà‡∏≠‡∏£‡∏∞‡∏ö‡∏ö -->
                <div class="flex items-center gap-3">
                    <div class="p-1 rounded-xl shadow-md bg-white border border-gray-200">
                        <img src="/static/logo_phayao.png"
                             alt="Hospital Logo"
                             class="h-14 w-14 object-contain">
                    </div>

                    <div>
                        <p class="text-lg font-bold text-primary">
                            ‡∏£‡∏∞‡∏ö‡∏ö‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û‡∏ú‡∏π‡πâ‡∏™‡∏π‡∏á‡∏≠‡∏≤‡∏¢‡∏∏
                        </p>
                        <p class="text-sm text-gray-500 -mt-1">
                            ‡∏Ñ‡∏•‡∏¥‡∏ô‡∏¥‡∏Å‡∏ú‡∏π‡πâ‡∏™‡∏π‡∏á‡∏≠‡∏≤‡∏¢‡∏∏ ‡πÇ‡∏£‡∏á‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•‡∏û‡∏∞‡πÄ‡∏¢‡∏≤
                        </p>
                    </div>
                </div>

                <!-- ‡πÄ‡∏°‡∏ô‡∏π‡∏ö‡∏ô navbar -->
                <div class="hidden md:flex items-center gap-2 text-sm font-medium">

                    <!-- Dashboard -->
                    <a href="{{ url_for('doctor_dashboard') }}"
                       class="px-3 py-1.5 rounded-full transition-colors
                              {% if request.endpoint == 'doctor_dashboard' %}
                                  bg-primary text-white
                              {% else %}
                                  text-gray-700 hover:bg-gray-100
                              {% endif %}">
                        Dashboard
                    </a>

                    <!-- ‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢ -->
                    <a href="{{ url_for('doctor_patients') }}"
                       class="px-3 py-1.5 rounded-full transition-colors
                              {% if request.endpoint in ['doctor_patients', 'doctor_patient_detail', 'doctor_patients_summary'] %}
                                  bg-primary text-white
                              {% else %}
                                  text-gray-700 hover:bg-gray-100
                              {% endif %}">
                        ‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢
                    </a>

                    <!-- ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô -->
                    <a href="{{ url_for('doctor_reports') }}"
                       class="px-3 py-1.5 rounded-full transition-colors
                              {% if request.endpoint == 'doctor_reports' %}
                                  bg-primary text-white
                              {% else %}
                                  text-gray-700 hover:bg-gray-100
                              {% endif %}">
                        ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô
                    </a>

                    <!-- ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÄ‡∏Ç‡πâ‡∏≤‡πÄ‡∏ß‡∏£ -->
                    <a href="{{ url_for('doctor_duty') }}"
                       class="px-3 py-1.5 rounded-full transition-colors
                              {% if request.endpoint == 'doctor_duty' %}
                                  bg-primary text-white
                              {% else %}
                                  text-gray-700 hover:bg-gray-100
                              {% endif %}">
                         ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÄ‡∏Ç‡πâ‡∏≤‡πÄ‡∏ß‡∏£
                    </a>
                </div>
            </div>

            <!-- Center : ‡πÄ‡∏ß‡∏•‡∏≤ Real-time (‡∏ã‡πà‡∏≠‡∏ô‡∏ö‡∏ô‡∏à‡∏≠‡πÄ‡∏•‡πá‡∏Å) -->
            <div class="hidden lg:flex items-center gap-3 px-4 py-2 rounded-2xl border border-slate-200 bg-white shadow-sm">
                <div class="w-9 h-9 rounded-xl bg-sky-50 flex items-center justify-center">
                    <!-- clock icon -->
                    <svg class="w-5 h-5 text-sky-600" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4l3 2"/>
                        <path stroke-linecap="round" stroke-linejoin="round" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                    </svg>
                </div>

                <div class="leading-tight">
                    <p id="thaiDate" class="font-semibold text-gray-700 text-sm"></p>
                    <p id="thaiTime" class="text-xs text-gray-500 -mt-0.5 tabular-nums"></p>
                </div>
            </div>

            <!-- Right : User -->
            <div class="flex items-center gap-4">
                <p class="text-gray-700 font-semibold">
                    üë®‚Äç‚öïÔ∏è ‡πÅ‡∏û‡∏ó‡∏¢‡πå
                </p>
                <a href="{{ url_for('logout') }}"
                   class="px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-xl shadow">
                    ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö
                </a>
            </div>
        </div>
    </nav>

    <!-- ========== CONTENT WRAPPER ========== -->
    <main class="max-w-7xl mx-auto px-4 py-6 space-y-8">

        {% block content %}{% endblock %}

        {% if request.endpoint != 'doctor_dashboard' %}
            <!-- ‡∏õ‡∏∏‡πà‡∏°‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å (‡πÉ‡∏ä‡πâ‡∏ó‡∏∏‡∏Å‡∏´‡∏ô‡πâ‡∏≤‡∏õ‡∏Å‡∏ï‡∏¥) -->
            <div id="global-back-wrapper" class="mt-6">
                <a href="{{ url_for('doctor_dashboard') }}"
                   class="inline-flex items-center gap-3 px-6 py-3 mb-6
                          rounded-full bg-slate-900 text-white text-lg font-semibold
                          shadow-md hover:shadow-lg hover:bg-slate-800
                          transform hover:-translate-y-0.5 transition-all">
                    <span class="flex items-center justify-center w-6 h-6 rounded-full bg-slate-800">
                        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"
                             stroke="#ffffff" class="h-8 w-8">
                            <path d="M9 21H7C4.79086 21 3 19.2091 3 17V10.7076C3 9.30887
                                    3.73061 8.01175 4.92679 7.28679L9.92679 4.25649C11.2011
                                    3.48421 12.7989 3.48421 14.0732 4.25649L19.0732
                                    7.28679C20.2694 8.01175 21 9.30887 21 10.7076V17C21
                                    19.2091 19.2091 21 17 21H15M9 21V17C9 15.3431
                                    10.3431 14 12 14C13.6569 14 15 15.3431 15 17V21M9 21H15"
                                  stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                        </svg>
                    </span>
                    <span class="text-base font-semibold">‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</span>
                </a>
            </div>
        {% endif %}
    </main>

    <!-- ========== FOOTER ========== -->
    <footer class="text-center py-4 text-gray-500 text-sm">
        ¬© 2024-2025 | ‡∏£‡∏∞‡∏ö‡∏ö‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û‡∏ú‡∏π‡πâ‡∏™‡∏π‡∏á‡∏≠‡∏≤‡∏¢‡∏∏ ‡πÇ‡∏£‡∏á‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•‡∏û‡∏∞‡πÄ‡∏¢‡∏≤
    </footer>

    <!-- ‚úÖ Realtime Thai Date/Time -->
    <script>
    (function () {
        const dateEl = document.getElementById("thaiDate");
        const timeEl = document.getElementById("thaiTime");
        if (!dateEl || !timeEl) return;

        const daysTH = ["‡∏≠‡∏≤‡∏ó‡∏¥‡∏ï‡∏¢‡πå","‡∏à‡∏±‡∏ô‡∏ó‡∏£‡πå","‡∏≠‡∏±‡∏á‡∏Ñ‡∏≤‡∏£","‡∏û‡∏∏‡∏ò","‡∏û‡∏§‡∏´‡∏±‡∏™","‡∏®‡∏∏‡∏Å‡∏£‡πå","‡πÄ‡∏™‡∏≤‡∏£‡πå"];
        const monthsTH = [
            "‡∏°‡∏Å‡∏£‡∏≤‡∏Ñ‡∏°","‡∏Å‡∏∏‡∏°‡∏†‡∏≤‡∏û‡∏±‡∏ô‡∏ò‡πå","‡∏°‡∏µ‡∏ô‡∏≤‡∏Ñ‡∏°","‡πÄ‡∏°‡∏©‡∏≤‡∏¢‡∏ô","‡∏û‡∏§‡∏©‡∏†‡∏≤‡∏Ñ‡∏°","‡∏°‡∏¥‡∏ñ‡∏∏‡∏ô‡∏≤‡∏¢‡∏ô",
            "‡∏Å‡∏£‡∏Å‡∏é‡∏≤‡∏Ñ‡∏°","‡∏™‡∏¥‡∏á‡∏´‡∏≤‡∏Ñ‡∏°","‡∏Å‡∏±‡∏ô‡∏¢‡∏≤‡∏¢‡∏ô","‡∏ï‡∏∏‡∏•‡∏≤‡∏Ñ‡∏°","‡∏û‡∏§‡∏®‡∏à‡∏¥‡∏Å‡∏≤‡∏¢‡∏ô","‡∏ò‡∏±‡∏ô‡∏ß‡∏≤‡∏Ñ‡∏°"
        ];

        const pad = (n) => String(n).padStart(2, "0");

        function tick() {
            const now = new Date();
            const dayName = daysTH[now.getDay()];
            const d = now.getDate();
            const m = monthsTH[now.getMonth()];
            const y = now.getFullYear() + 543;

            const hh = pad(now.getHours());
            const mm = pad(now.getMinutes());
            const ss = pad(now.getSeconds());

            dateEl.textContent = `${dayName} ${d} ${m} ${y}`;
            timeEl.textContent = `‡πÄ‡∏ß‡∏•‡∏≤ ${hh}:${mm}:${ss} ‡∏ô.`;
        }

        tick();
        setInterval(tick, 1000);
    })();
    </script>

</body>
</html>
