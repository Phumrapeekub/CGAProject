{% extends "nurse/base.html" %}
{% block title %}Dashboard | CGA{% endblock %}
{% block content %}
<div class="sticky top-0 z-30 bg-white/90 backdrop-blur border-b border-slate-100">
  <div class="max-w-7xl mx-auto px-4 py-3 flex items-center gap-3">
    <!-- ‡∏ã‡πâ‡∏≤‡∏¢: ‡πÇ‡∏•‡πÇ‡∏Å‡πâ‡∏£‡∏∞‡∏ö‡∏ö -->
    <div class="flex items-center gap-2">
      <div class="w-9 h-9 rounded-xl bg-gradient-to-b from-blue-400 to-blue-600 grid place-items-center text-white">
        <svg viewBox="0 0 24 24" class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="1.6">
          <path stroke-linecap="round" stroke-linejoin="round" d="M7.5 11.5a2.5 2.5 0 105 0V7.8a1.3 1.3 0 112.6 0v6.2a2.5 2.5 0 105 0V9.8"/>
        </svg>
      </div>
      <div class="leading-tight">
        <div class="font-semibold">CGA System</div>
        <div class="text-xs text-slate-500">‡πÇ‡∏£‡∏á‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•‡∏û‡∏∞‡πÄ‡∏¢‡∏≤</div>
      </div>
    </div>

    <!-- ‡∏ï‡∏£‡∏á‡∏Å‡∏•‡∏≤‡∏á‡πÄ‡∏ß‡πâ‡∏ô‡πÑ‡∏ß‡πâ‡∏î‡∏±‡∏ô‡πÉ‡∏´‡πâ‡∏Ç‡∏ß‡∏≤‡∏™‡∏∏‡∏î -->
    <div class="flex-1"></div>

    <!-- ‡∏Ç‡∏ß‡∏≤: ‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ + ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á + logout -->
    <div class="flex items-center gap-3">
      <div class="text-right hidden sm:block">
        <div class="text-sm font-medium">
          ‡∏ä‡∏∑‡πà‡∏≠‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏• {{ user }}
        </div>
        <div class="text-xs text-slate-500">
          {{ role }}
        </div>
      </div>
      <a href="{{ url_for('auth.logout') }}"
         class="px-3 py-1.5 rounded-xl border border-rose-300 text-rose-600 hover:bg-rose-50 text-sm font-medium">
        ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö
      </a>
    </div>
  </div>
</div>


<div class="max-w-7xl mx-auto px-4 py-6 space-y-6">
  <div>
    <h1 class="text-3xl font-semibold">Dashboard ‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•</h1>
    <p class="text-slate-500 mt-1">‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û‡∏ú‡∏π‡πâ‡∏™‡∏π‡∏á‡∏≠‡∏≤‡∏¢‡∏∏</p>
  </div>

  <!-- KPIs -->
  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
    <div class="rounded-3xl bg-white shadow-md p-5 border border-slate-100">
      <div class="flex items-center justify-between">
        <div class="w-10 h-10 rounded-xl grid place-items-center bg-slate-100 text-slate-600">
          <svg class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8">
            <path stroke-linecap="round" d="M8 2v3M16 2v3M3 9h18M4 7h16a1 1 0 011 1v11a2 2 0 01-2 2H5a2 2 0 01-2-2V8a1 1 0 011-1z"/>
          </svg>
        </div>
        <span class="text-xs px-2 py-0.5 rounded-full bg-emerald-100 text-emerald-700">‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ</span>
      </div>
      <div class="mt-3 text-5xl font-semibold">{{ kpis.today }}</div>
      <div class="text-slate-500 text-sm mt-1">‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢‡∏ó‡∏µ‡πà‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ</div>
    </div>

    <div class="rounded-3xl bg-white shadow-md p-5 border border-slate-100">
      <div class="flex items-center justify-between">
        <div class="w-10 h-10 rounded-xl grid place-items-center bg-purple-100 text-purple-600">
          <svg class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8">
            <path d="M3 3h18M3 12h18M3 21h18" stroke-linecap="round"/>
          </svg>
        </div>
        <span class="text-xs px-2 py-0.5 rounded-full bg-purple-100 text-purple-700">‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå‡∏ô‡∏µ‡πâ</span>
      </div>
      <div class="mt-3 text-5xl font-semibold">{{ kpis.week }}</div>
      <div class="text-slate-500 text-sm mt-1">‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå‡∏ô‡∏µ‡πâ</div>
    </div>

    <div class="rounded-3xl bg-white shadow-md p-5 border border-slate-100">
      <div class="flex items-center justify-between">
        <div class="w-10 h-10 rounded-xl grid place-items-center bg-orange-100 text-orange-600">
          <svg class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8">
            <path d="M12 6v12M6 12h12" stroke-linecap="round"/>
          </svg>
        </div>
        <span class="text-xs px-2 py-0.5 rounded-full bg-orange-100 text-orange-700">‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ô‡∏µ‡πâ</span>
      </div>
      <div class="mt-3 text-5xl font-semibold">{{ kpis.month }}</div>
      <div class="text-slate-500 text-sm mt-1">‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ô‡∏µ‡πâ</div>
    </div>

    <div class="rounded-3xl bg-white shadow-md p-5 border border-slate-100">
      <div class="flex items-center justify-between">
        <div class="w-10 h-10 rounded-xl grid place-items-center bg-emerald-100 text-emerald-600">
          <svg class="w-5 h-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8">
            <path d="M12 4a8 8 0 100 16 8 8 0 000-16z"/>
          </svg>
        </div>
        <span class="text-xs px-2 py-0.5 rounded-full bg-emerald-100 text-emerald-700">‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</span>
      </div>
      <div class="mt-3 text-5xl font-semibold">{{ kpis.total }}</div>
      <div class="text-slate-500 text-sm mt-1">‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</div>
    </div>
  </div>

  <!-- Quick actions -->
  <div class="rounded-3xl bg-white p-5 shadow-md border border-slate-100">
    <div class="font-semibold mb-3">‡∏Å‡∏≤‡∏£‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡∏î‡πà‡∏ß‡∏ô</div>
    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
      <a href="{{ url_for('nurse.assess_start') }}">
         class="block text-center rounded-2xl bg-gradient-to-r from-blue-500 to-blue-600 text-white py-4 font-semibold shadow-lg relative"
         style="z-index: 10;">
        ‚ûï ‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢‡πÉ‡∏´‡∏°‡πà
      </a>
      <a href="{{ url_for('patient_list') }}"
   class="block text-center rounded-2xl border-2 border-purple-300 text-purple-600 py-4 font-semibold hover:bg-purple-50">
   üë§ ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢
    </a>

    <a href="{{ url_for('dashboard') }}"
   class="block text-center rounded-2xl border-2 border-emerald-300 text-emerald-600 py-4 font-semibold hover:bg-emerald-50">
   üìä ‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏™‡∏£‡∏∏‡∏õ
    </a>
    </div>
  </div>

  <!-- ‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡πÉ‡∏™‡πà‡∏Ñ‡∏≠‡∏ô‡πÄ‡∏ó‡∏ô‡∏ï‡πå‡∏≠‡∏∑‡πà‡∏ô‡πÑ‡∏î‡πâ‡∏ï‡∏≤‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ -->

</div>
<!-- Chart.js CDN -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<!-- ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å‡πÄ‡∏ã‡∏¥‡∏£‡πå‡∏ü‡πÄ‡∏ß‡∏≠‡∏£‡πå‡πÄ‡∏õ‡πá‡∏ô JSON (‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà JS) -->
<script id="chart-data" type="application/json">
  {{ {
      "bar_labels": bar_labels,
      "bar_values": bar_values,
      "risk": risk
    } | tojson }}
</script>

<!-- ‡∏™‡∏Ñ‡∏£‡∏¥‡∏õ‡∏ï‡πå‡∏Å‡∏£‡∏≤‡∏ü (‡πÑ‡∏ü‡∏•‡πå‡πÅ‡∏¢‡∏Å) -->
<script src="{{ url_for('static', filename='dashboard.js') }}"></script>
{% endblock %}
